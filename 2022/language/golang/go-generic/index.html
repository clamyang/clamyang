<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="ä¸€ç‰©ä¸çŸ¥æ·±ä»¥ä¸ºè€»"><title>go-generic | æ¨å®å¼ºçš„æŠ€æœ¯ç¬”è®°</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><div class="darkmode-toggle">ğŸŒ“</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 5.4.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">go-generic</h1><a id="logo" href="/.">æ¨å®å¼ºçš„æŠ€æœ¯ç¬”è®°</a><p class="description">Coder Gopher Watcher</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/about/"><i class="fa fa-user"> å…³äº</i></a><a href="/atom.xml"><i class="fa fa-rss"> è®¢é˜…</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">go-generic</h1><div class="post-meta">2022-06-06</div><div class="post-content"><p><img src="https://s2.loli.net/2022/06/06/LNYfsvCZwxeh3l9.png"></p>
<p>go æ³›å‹å­¦ä¹ ï¼Œè·ç¦»æ³›å‹çš„å‘å¸ƒå·²ç»æœ‰å¾ˆé•¿ä¸€æ®µæ—¶é—´äº†ï¼Œä¹‹å‰å¤§æ¦‚çœ‹äº†ä¸‹å®˜æ–¹æ–‡æ¡£ï¼Œè¯´æœ‰äº›ä¸œè¥¿å¯èƒ½å°†æ¥éƒ½ä¼šæ”¹å˜ï¼Œä¸ä¿è¯å‘å‰å…¼å®¹ï¼Œå°±æ²¡æœ‰å…·ä½“äº†è§£ï¼Œ1.18ä¹Ÿå‘äº†å‡ ä¸ªç‰ˆæœ¬äº†ï¼Œæ„Ÿè§‰å†ä¸åŠªåŠ›åˆè¦è¢«å°ä¼™ä¼´ä»¬å·å®Œäº†ã€‚</p>
<span id="more"></span>

<h2 id="å›°æ‰°"><a href="#å›°æ‰°" class="headerlink" title="å›°æ‰°"></a>å›°æ‰°</h2><p>æ²¡æœ‰æ³›å‹çš„æ—¶å€™å¸¦ç»™æˆ‘ä»¬çš„å›°æ‰°ï¼ˆè™½ç„¶æ²¡æœ‰äº²èº«ä½“ä¼šè¿‡ï¼Œä½†æ˜¯æ„Ÿè§‰å¾ˆéº»çƒ¦ï¼‰</p>
<h3 id="Case-1"><a href="#Case-1" class="headerlink" title="Case 1"></a>Case 1</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Sum returns the sum of the provided arguments.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sum</span><span class="params">(args ...<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> sum <span class="keyword">int</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(args); i++ &#123;</span><br><span class="line">        sum += args[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>è¦è®¡ç®— n æ•°ä¹‹å’Œï¼Œå¦‚ä¸Šè¿°ä¾‹å­ï¼Œå¦‚æœè¿™æ—¶è¦è®¡ç®— int32, float64 ç±»å‹å…ƒç´ çš„å’Œå‘¢ï¼Ÿ</p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œ asserting typeï¼Œæˆ–è€…ä¸ºæ¯ç§ç±»å‹å†™ä¸åŒçš„å‡½æ•° <code>sumInt</code> <code>sumInt32</code> <code>sumInt64</code> ç­‰ï¼Œåœ¨æºç ä¸­å°±æœ‰ç±»ä¼¼çš„ä»£ç ã€‚</p>
<h3 id="Case-2"><a href="#Case-2" class="headerlink" title="Case 2"></a>Case 2</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// Declare &quot;host&quot; and &quot;port&quot; in order to create pointers to satisfy the</span></span><br><span class="line">    <span class="comment">// fields in the &quot;request&quot; struct.</span></span><br><span class="line">    host, port := <span class="string">&quot;local&quot;</span>, <span class="number">80</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(request&#123;</span><br><span class="line">        host: &amp;host,</span><br><span class="line">        port: &amp;port,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>This leads to cluttered, hard-to-read code where the only purpose variables serve is for deriving pointers.</p>
</blockquote>
<p>å¯¹æ¯ä¸ªå˜é‡è¿›è¡Œå–å€æ“ä½œï¼Œ<em>æˆ‘ä¹‹å‰å°±å†™è¿‡è¿™æ ·çš„ä»£ç </em> ï¼Œä¸ºäº†å–å€ä¸å¾—ä¸å£°æ˜ä¸€ä¸ªå˜é‡ã€‚</p>
<p>é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œå¯ä»¥å®ç°ä¸åŒçš„å‡½æ•°è¿›è¡Œå–å€æ“ä½œã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// PtrInt returns *i.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">PtrInt</span><span class="params">(i <span class="keyword">int</span>)</span> *<span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &amp;i</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PtrStr returns *s.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">PtrStr</span><span class="params">(s <span class="keyword">string</span>)</span> *<span class="title">string</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &amp;s</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// Use the two helper functions that return pointers to their provided</span></span><br><span class="line">    <span class="comment">// values. Remember, this pattern must scale with the number of distinct,</span></span><br><span class="line">    <span class="comment">// defined types that need to be passed by pointer instead of value.</span></span><br><span class="line">    <span class="built_in">print</span>(request&#123;</span><br><span class="line">        host: PtrStr(<span class="string">&quot;local&quot;</span>),</span><br><span class="line">        port: PtrInt(<span class="number">80</span>),</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>çœ‹èµ·æ¥å¯èƒ½æ¯”ä¸Šè¾¹çš„ä¼˜é›…äº†ä¸€äº›ï¼Œä½†æ˜¯è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬çœ‹ä¸‹æ³›å‹ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Ptr returns *value.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Ptr</span>[<span class="title">T</span> <span class="title">any</span>]<span class="params">(value T)</span> *<span class="title">T</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &amp;value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// No local variables and the typed helper functions can be collapsed into</span></span><br><span class="line">    <span class="comment">// a single, generic function for getting a pointer to a value.</span></span><br><span class="line">    <span class="built_in">print</span>(request&#123;</span><br><span class="line">        host: Ptr(<span class="string">&quot;local&quot;</span>),</span><br><span class="line">        port: Ptr(<span class="number">80</span>),</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>ä¸€æ–¹é¢æ˜¯ä»£ç é‡å‡å°‘äº†å¾ˆå¤šï¼Œå¦ä¸€æ–¹çœ‹æ˜¯çœ‹èµ·æ¥æ›´æ•´æ´ã€‚</p>
<h2 id="generic-è¯­æ³•"><a href="#generic-è¯­æ³•" class="headerlink" title="generic è¯­æ³•"></a>generic è¯­æ³•</h2><p>ä½¿ç”¨ <em>æ³›å‹</em> é‡å†™è¿™æ®µä»£ç </p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Sum returns the sum of the provided arguments.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sum</span><span class="params">(args ...<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> sum <span class="keyword">int</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(args); i++ &#123;</span><br><span class="line">        sum += args[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>æ³›å‹ç‰ˆæœ¬ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sum</span>[<span class="title">T</span> <span class="title">int</span>]<span class="params">(args ...T)</span> <span class="title">T</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> sum T</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(args); i++ &#123;</span><br><span class="line">        sum += args[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><code>[]</code> æ˜¯ç”¨æ¥å®šä¹‰æ³›å‹çš„ï¼Œå¸¸ç”¨çš„æ¨¡å¼ä¸º <code>[&lt;ID&gt; &lt;CONSTRAINT&gt;]</code></p>
<ul>
<li><code>&lt;ID&gt;</code> æ˜¯ç”¨æ¥è¡¨ç¤ºæ³›å‹çš„ç¬¦å·ï¼›</li>
<li><code>&lt;CONSTRAINT&gt;</code> çº¦æŸï¼Œè¡¨æ˜å¯ä½¿ç”¨çš„å…·ä½“ç±»å‹ï¼Œå¦‚ä¸Šï¼Œåªèƒ½ä½¿ç”¨ intï¼›</li>
</ul>
<p>ä½†æ˜¯è¿™æ—¶å€™æˆ‘ä»¬æƒ³æ”¯æŒ int64 ç±»å‹çš„ n æ•°å’Œåº”è¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<h3 id="Constraint"><a href="#Constraint" class="headerlink" title="Constraint"></a>Constraint</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sum</span>[<span class="title">T</span> <span class="title">int</span>|<span class="title">int64</span>]<span class="params">(args ...T)</span> <span class="title">T</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> sum T</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(args); i++ &#123;</span><br><span class="line">        sum += args[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>ä½¿ç”¨ <code>|</code> è¿ç®—ç¬¦ï¼Œè¿™æ—¶ï¼ŒT å°±å¯ä»¥æ»¡è¶³ int æˆ–è€… int64ï¼Œè‡³äºä¸ºä»€ä¹ˆä½¿ç”¨ <code>|</code> è¿ç®—ç¬¦ä¸åšè¿‡å¤šè€ƒç©¶ã€‚</p>
<p>ä½†æ˜¯è¿™æ—¶è¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œå¦‚æœè¯´è¦æ”¯æŒæ›´å¤šçš„ç±»å‹åº”è¯¥æ€ä¹ˆåšï¼Ÿéš¾é“è¦ <code>int|int32|int64</code> ? go ä¹Ÿç»™æˆ‘ä»¬æä¾›äº†ç›¸åº”çš„è¯­æ³•ã€‚</p>
<h4 id="any-constraint"><a href="#any-constraint" class="headerlink" title="any constraint"></a><code>any</code> constraint</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// sum_any.go</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sum</span>[<span class="title">T</span> <span class="title">any</span>]<span class="params">(args ...T)</span> <span class="title">T</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> sum T</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(args); i++ &#123;</span><br><span class="line">        sum += args[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(Sum([]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;...))</span><br><span class="line">    fmt.Println(Sum([]<span class="keyword">int8</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;...))</span><br><span class="line">    fmt.Println(Sum([]<span class="keyword">uint32</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;...))</span><br><span class="line">    fmt.Println(Sum([]<span class="keyword">float64</span>&#123;<span class="number">1.1</span>, <span class="number">2.2</span>, <span class="number">3.3</span>&#125;...))      </span><br><span class="line">    fmt.Println(Sum([]<span class="keyword">complex128</span>&#123;<span class="number">1.1i</span>, <span class="number">2.2i</span>, <span class="number">3.3i</span>&#125;...))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>å»æ‰§è¡Œè¯•ä¸‹ï¼Œä¼šæ„å¤–çš„å‘ç°ä½¿ç”¨ <code>any</code> å…¶å®è¡Œä¸é€šï¼ŒåŸå› æ˜¯å•¥å‘¢ï¼Ÿ</p>
<blockquote>
<p>./sum_any.go:11:3: invalid operation: operator + not defined on sum (variable of type T constrained by any)</p>
</blockquote>
<p> <code>+</code> è¿ç®—ç¬¦å¹¶ä¸æ˜¯å¯¹æ‰€æœ‰çš„ç±»å‹éƒ½ç”Ÿæ•ˆã€‚</p>
<p>æ—¢ç„¶è¿™æ ·ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥å£°æ˜ä¸€ä¸ªä¸œè¥¿ï¼Œé™å®šåªèƒ½è¾“æ•°å­—ç±»å‹çš„å‚æ•°å‘¢ï¼Ÿ</p>
<h4 id="Composite-constraints"><a href="#Composite-constraints" class="headerlink" title="Composite constraints"></a>Composite constraints</h4><p>å¤åˆç±»å‹</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Numeric expresses a type constraint satisfied by any numeric type.</span></span><br><span class="line"><span class="keyword">type</span> Numeric <span class="keyword">interface</span> &#123;</span><br><span class="line">    <span class="keyword">uint</span> | <span class="keyword">uint8</span> | <span class="keyword">uint16</span> | <span class="keyword">uint32</span> | <span class="keyword">uint64</span> |</span><br><span class="line">    <span class="keyword">int</span> | <span class="keyword">int8</span> | <span class="keyword">int16</span> | <span class="keyword">int32</span> | <span class="keyword">int64</span> |</span><br><span class="line">    <span class="keyword">float32</span> | <span class="keyword">float64</span> |</span><br><span class="line">    <span class="keyword">complex64</span> | <span class="keyword">complex128</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Sum returns the sum of the provided arguments.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sum</span>[<span class="title">T</span> <span class="title">Numeric</span>]<span class="params">(args ...T)</span> <span class="title">T</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> sum T</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(args); i++ &#123;</span><br><span class="line">        sum += args[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>ä¸‹é¢è¿™ç§æƒ…å†µå¦‚ä½•å¤„ç†ï¼Ÿ</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// id is a new type definition for an int64</span></span><br><span class="line"><span class="keyword">type</span> id <span class="keyword">int64</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(Sum([]id&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;...))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>æˆ‘ä»¬ç»™ int64 èµ·äº†ä¸ªåˆ«åï¼Œè¿™æ—¶å€™ç¼–è¯‘å°±ä¼šæŠ¥é”™äº†ï¼Œé‚£æˆ‘ä»¬åº”è¯¥æ€æ ·å»è¯†åˆ«åˆ«åå‘¢ï¼Ÿ</p>
<h4 id="Tilde"><a href="#Tilde" class="headerlink" title="Tilde ~"></a>Tilde <code>~</code></h4><p>æ³¢æµªå·å°±æ˜¯å¹²è¿™ä¸ªäº‹æƒ…çš„ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œ<code>~int</code> è¡¨ç¤ºï¼š</p>
<ul>
<li>å†…ç½®çš„ int ç±»å‹</li>
<li><code>type Integer int </code> ç±»å‹ï¼Œèµ·åˆ«åçš„ç±»å‹</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Numeric <span class="keyword">interface</span> &#123;</span><br><span class="line">    <span class="keyword">uint</span> | <span class="keyword">uint8</span> | <span class="keyword">uint16</span> | <span class="keyword">uint32</span> | <span class="keyword">uint64</span> |</span><br><span class="line">    <span class="comment">// è°ƒæ•´å¦‚ä¸‹</span></span><br><span class="line">    <span class="keyword">int</span> | <span class="keyword">int8</span> | <span class="keyword">int16</span> | <span class="keyword">int32</span> | ~<span class="keyword">int64</span> |</span><br><span class="line">    <span class="keyword">float32</span> | <span class="keyword">float64</span> |</span><br><span class="line">    <span class="keyword">complex64</span> | <span class="keyword">complex128</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Type-inference"><a href="#Type-inference" class="headerlink" title="Type inference"></a>Type inference</h3><ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://go.googlesource.com/proposal/+/refs/heads/master/design/43651-type-parameters.md">Type Parameters Proposal</a> å¾…é˜…è¯»</li>
</ul>
<ul>
<li>Type inference is a convenience feature</li>
<li>The Go compiler tries <em>really</em> hard to infer the intended types, but it does not always work when you think it should</li>
<li>If you are not sure why something written generically is not working, try providing the types explicitly</li>
</ul>
<h3 id="Explicit-types"><a href="#Explicit-types" class="headerlink" title="Explicit types"></a>Explicit types</h3><p>æ˜¾ç¤ºæŒ‡å®šç±»å‹</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(Sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line">    fmt.Println(Sum([]id&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;...))</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Generic types can be specified explicitly by invoking a function</span></span><br><span class="line">    <span class="comment">// with the bracket notation and the list of types to use. Because</span></span><br><span class="line">    <span class="comment">// the Sum function only has a single, generic type -- &quot;T&quot; -- the</span></span><br><span class="line">    <span class="comment">// call &quot;Sum[float64]&quot; means that &quot;T&quot; will be replaced by &quot;float64&quot;</span></span><br><span class="line">    <span class="comment">// when compiling the code. Since the values &quot;1&quot; and &quot;2&quot; can both</span></span><br><span class="line">    <span class="comment">// be treated as &quot;float64,&quot; the code is valid.</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// go ç±»å‹æ¨æ–­ä¸º int ç±»å‹ï¼Œä½†æ˜¯åç»­å‡ºç°äº†æµ®ç‚¹æ•°ï¼Œå¯¼è‡´å¤±è´¥ã€‚</span></span><br><span class="line">    <span class="comment">// æˆ‘ä»¬å¯ä»¥æ˜ç¡®è§„å®šè¿™ä¸ªä¸º æµ®ç‚¹æ•°ç±»å‹ã€‚</span></span><br><span class="line">    fmt.Println(Sum[<span class="keyword">float64</span>](<span class="number">1</span>, <span class="number">2</span>, <span class="number">3.0</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Multiple-generic-types"><a href="#Multiple-generic-types" class="headerlink" title="Multiple generic types"></a>Multiple generic types</h3><p>åˆ°è¿™é‡Œä¸ºæ­¢ï¼Œæ¥è§¦åˆ°çš„éƒ½æ˜¯æ¥æ”¶å•ä¸€å‚æ•°çš„å‡½æ•°ï¼Œè¿™é‡Œå­¦ä¹ ä¸‹æ€ä¹ˆæ¥æ”¶å¤šä¸ªæ³›å‹å‚æ•°ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// PrintIDAndSum prints the provided ID and sum of the given values to stdout.</span></span><br><span class="line"><span class="comment">// åº”è¯¥è¿˜è®°å¾— ~ çš„ç”¨æ³•å§ï¼Œé€‚é…ç±»å‹åˆ«å</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">PrintIDAndSum</span>[<span class="title">T</span> ~<span class="title">string</span>, <span class="title">K</span> <span class="title">Numeric</span>]<span class="params">(id T, sum SumFn[K], values ...K)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The format string uses &quot;%v&quot; to emit the sum since using &quot;%d&quot; would</span></span><br><span class="line">    <span class="comment">// be invalid if the value type was a float or complex variant.</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%s has a sum of %v\n&quot;</span>, id, sum(values...))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>æ³¨æ„</p>
</blockquote>
<p>åœ¨è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ä»éœ€è¦æ˜¾ç¤ºæŒ‡å®š <code>sum</code> çš„ç±»å‹ï¼Œ<code>PrintIDAndSum(&quot;xx&quot;, Sum[int32], 1, 2, 3)</code> ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šç±»å‹ï¼Œå°±ä¼šæŠ¥é”™ï¼š<code>./mulgen.go:12:22: cannot use generic function Sum without instantiation</code></p>
<h3 id="Declaring-a-new-instance-of-T-with-var"><a href="#Declaring-a-new-instance-of-T-with-var" class="headerlink" title="Declaring a new instance of T with var"></a>Declaring a new instance of <code>T</code> with <code>var</code></h3><p>è¿™é‡Œè·Ÿåœ¨ä¸Šè¿° sum ä¸­å£°æ˜å˜é‡æ²¡ä»€ä¹ˆåŒºåˆ«ã€‚</p>
<h3 id="Declaring-a-new-instance-of-T-with-new"><a href="#Declaring-a-new-instance-of-T-with-new" class="headerlink" title="Declaring a new instance of T with new"></a>Declaring a new instance of <code>T</code> with <code>new</code></h3><p>new ä¹‹åçš„å˜é‡ä¼šè¢«åˆ†é…åœ°å€ï¼Œä¸å†æ˜¯ nilã€‚</p>
<h3 id="Structs"><a href="#Structs" class="headerlink" title="Structs"></a>Structs</h3><p>å°†æ³›å‹å’Œç»“æ„ä½“ç»“åˆä½¿ç”¨ï¼Œä¸éš¾çœ‹å‡ºè¯­æ³•ä¸Šå’Œå‡½æ•°å®šä¹‰å¤§å·®ä¸å·®ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Ledger[T ~<span class="keyword">string</span>, K Numeric] <span class="keyword">struct</span> &#123;</span><br><span class="line">    ID 		T</span><br><span class="line">    Amounts []k</span><br><span class="line">    SumFn	SumFn[K]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>ä¸ºæ³›å‹ç»“æ„ä½“æ·»åŠ æ–¹æ³•ï¼Œæ­£å› ä¸ºç»“æ„ä½“ä¸­æœ‰æ³›å‹ï¼Œæ‰€ä»¥åœ¨å£°æ˜æ–¹æ³•æ—¶ä¹Ÿè¦å¯¼å…¥<strong>ç›¸åº”çš„ç¬¦å·ï¼Œçº¦æŸä¸éœ€è¦</strong>ï¼Œå› ä¸ºæ˜¯ä¸ºäº†ç±»å‹æ¨æ–­ä½¿ç”¨ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(l Ledger[T, K])</span> <span class="title">PrintIDAndSum</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%s has a sum of %v\n&quot;</span>, l.ID, l.SumFn(l.Amounts...))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>ç®€å•ç¤ºä¾‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// generic struct</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Numeric <span class="keyword">interface</span> &#123;</span><br><span class="line">    <span class="keyword">int</span> | <span class="keyword">int32</span> | <span class="keyword">int64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Ledger[T ~<span class="keyword">string</span>, K Numeric] <span class="keyword">struct</span> &#123;</span><br><span class="line">    ID T</span><br><span class="line">    Amounts []K</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(l Ledger[T, K])</span> <span class="title">PrintA</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(l.ID)</span><br><span class="line">    <span class="built_in">print</span>(l.Amounts)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    Ledger[<span class="keyword">string</span>, <span class="keyword">int</span>]&#123;</span><br><span class="line">        ID: <span class="string">&quot;test-qq&quot;</span>,</span><br><span class="line">        Amounts: []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>&#125;,</span><br><span class="line">    &#125;.PrintA()</span><br><span class="line"></span><br><span class="line">    Ledger[<span class="keyword">string</span>, <span class="keyword">int32</span>]&#123;</span><br><span class="line">        ID: <span class="string">&quot;test-qq&quot;</span>,</span><br><span class="line">        Amounts: []<span class="keyword">int32</span>&#123;<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>&#125;,</span><br><span class="line">    &#125;.PrintA()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="Structural-Constraints"><a href="#Structural-Constraints" class="headerlink" title="Structural Constraints"></a>Structural Constraints</h4><p>è¿™ä¸ªç‰¹æ€§è¿˜å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæ³›å‹çš„ç»“æ„ä½“æš‚æ—¶ç¦æ­¢è®¿é—®å­—æ®µï¼Œå…¶å®æ„Ÿè§‰æŒºä¸€èˆ¬çš„ï¼Œæ—¢ç„¶æ›´ç‰ˆæœ¬äº†ä¸ºå•¥ä¸åšå¥½ã€åšå®Œå–„å‘¢ï¼Ÿ</p>
<p>â€¦</p>
<p><strong>åŒ¿åç»“æ„ä½“</strong></p>
<p>å¦‚æœè¯´è¦æ¥æ”¶ä»»æ„åŒ…å«è¿™ä¸‰ä¸ªå­—æ®µçš„ç»“æ„ä½“ï¼ˆå³ Ledger çš„å®ä¾‹ï¼‰ï¼Œéœ€è¦åƒä¸‹é¢è¿™æ ·å®ç°ï¼Œ<strong>æ‰€æœ‰çš„ç»“æ„ä½“éƒ½å®ç°äº†åŒ¿åç»“æ„ä½“</strong>ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">SomeFunc</span>[</span></span><br><span class="line">    T ~<span class="keyword">string</span>,</span><br><span class="line">    K Numeric,</span><br><span class="line">    L ~<span class="keyword">struct</span> &#123;</span><br><span class="line">        ID      T</span><br><span class="line">        Amounts []K</span><br><span class="line">        SumFn   SumFn[K]</span><br><span class="line">    &#125;,</span><br><span class="line">](l L) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    SomeFunc[<span class="keyword">string</span>, <span class="keyword">int</span>, Ledger[<span class="keyword">string</span>, <span class="keyword">int</span>]](Ledger[<span class="keyword">string</span>, <span class="keyword">int</span>]&#123;</span><br><span class="line">        ID:      <span class="string">&quot;acct-1&quot;</span>,</span><br><span class="line">        Amounts: []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;,</span><br><span class="line">        SumFn:   Sum[<span class="keyword">int</span>],</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>Structural constraints must match the struct <em>exactly</em>, and this means even if all of the fields in the constraint are present, the presence of additional fields in the provided value means the type does not satisfy the constraint.</p>
</blockquote>
<p>è¿™é‡Œå¯ä»¥æš‚æ—¶ä¸è€ƒè™‘ï¼Œåç»­å¾…å®˜æ–¹å®Œå–„äº†å†å­¦ä¹Ÿä¸è¿Ÿï¼Œæ¯•ç«Ÿç°åœ¨å·¥ä½œä¸­ç”¨ä¸åˆ°è¿™äº›ä¸œè¥¿..</p>
<h3 id="Interface-constraints"><a href="#Interface-constraints" class="headerlink" title="Interface constraints"></a>Interface constraints</h3><p>æ¥å£çº¦æŸä¹‹å‰å·²ç»è§è¿‡äº†ï¼Œ <code>Numeric</code>  é™åˆ¶äº†ç±»å‹åªèƒ½æ˜¯ <code>int int32 int64</code></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Numeric <span class="keyword">interface</span> &#123;</span><br><span class="line">    <span class="keyword">int</span> | <span class="keyword">int32</span> | <span class="keyword">int64</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹äºç»“æ„ä½“æ¥è¯´ï¼Œæƒ³é€šè¿‡æ¥å£è°ƒç”¨æ–¹æ³•ï¼Œéœ€è¦åœ¨ä¸Šè¿°é‚£æ ·çš„åŸºç¡€ä¸Šå†æ·»åŠ ä¸Šæ–¹æ³•ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Ledgerish expresses a constraint that may be satisfied by types that have</span></span><br><span class="line"><span class="comment">// ledger-like qualities.</span></span><br><span class="line"><span class="keyword">type</span> Ledgerish[T ~<span class="keyword">string</span>, K Numeric] <span class="keyword">interface</span> &#123;</span><br><span class="line">    ~<span class="keyword">struct</span> &#123;</span><br><span class="line">        ID      T</span><br><span class="line">        Amounts []K</span><br><span class="line">        SumFn   SumFn[K]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    PrintIDAndSum()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Careful-Constructs"><a href="#Careful-Constructs" class="headerlink" title="Careful Constructs"></a>Careful Constructs</h3><h3 id="Internals"><a href="#Internals" class="headerlink" title="Internals"></a>Internals</h3><h4 id="Type-erasure"><a href="#Type-erasure" class="headerlink" title="Type erasure"></a>Type erasure</h4><p>åœ¨äº†è§£ Go ä¸­æ³›å‹æ˜¯æ€ä¹ˆåšåˆ°è¿è¡Œæ—¶å®‰å…¨å‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹ç±»å‹æ“¦é™¤ã€‚</p>
<p>Wiki ä¸Šçš„å®šä¹‰æ˜¯ï¼š<em>the load-time process by which explicit type annotations are removed from a program before it is executed at run-time</em></p>
<p>ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼Œç¨‹åºåœ¨è¿è¡Œæ—¶æ‰§è¡Œå‰ï¼Œè¿›ç¨‹æ˜¾ç¤ºçš„å°†ç±»å‹æ³¨è§£ä»ç¨‹åºä¸­ç§»é™¤æ‰ã€‚ï¼ˆè‡ªå·±ç¿»è¯‘çš„ï¼‰</p>
<p>ä¼ªä»£ç æ¼”ç¤ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ints = List&lt;Int32&gt;&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">var</span> strs = List&lt;String&gt;&#123;<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;world&quot;</span>&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Type erasure</strong> æ‰§è¡Œå</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ints = List&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">var</span> strs = List&#123;<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;world&quot;</span>&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸¤ä¸ªçš„å”¯ä¸€åŒºåˆ«å°±æ˜¯å°†ç±»å‹æ“¦é™¤æ‰äº†ï¼Œè¿™ä¸ªç‰¹æ€§åœ¨å¾ˆå¤šæµè¡Œçš„ç¼–ç¨‹è¯­è¨€ä¸­éƒ½æœ‰ã€‚</p>
<h5 id="JAVA"><a href="#JAVA" class="headerlink" title="JAVA"></a>JAVA</h5><p>java ä¸­ type erasure çš„ä½“ç°ï¼š<a target="_blank" rel="noopener" href="https://github.com/akutz/go-generics-the-hard-way/blob/main/05-internals/01-type-erasure/02-java.md">java-type-erasure</a></p>
<h5 id="Net"><a href="#Net" class="headerlink" title=".Net"></a>.Net</h5><p>.Net ä¸­ type erasure çš„ä½“ç°ï¼š<a target="_blank" rel="noopener" href="https://github.com/akutz/go-generics-the-hard-way/blob/main/05-internals/01-type-erasure/03-dotnet.md">.Net-type-erasure</a></p>
<h5 id="Golang"><a href="#Golang" class="headerlink" title="Golang"></a>Golang</h5><p>Go ä¸­ type erasure çš„ä½“ç°ï¼š<a target="_blank" rel="noopener" href="https://github.com/akutz/go-generics-the-hard-way/blob/main/05-internals/01-type-erasure/04-golang.md">Golang-type-erasure</a> ï¼Œè¿™é‡Œä»‹ç»åˆ°ï¼ŒGoä¸­æ²¡æœ‰åçœæ¨¡æ¿ï¼Œlist ä¸­ä¿ç•™çš„ä»æ˜¯å…·ä½“ç±»å‹ï¼Œä¸åƒ JAVA ä¸­ç¿»è¯‘æˆ objectã€‚</p>
<h4 id="Runtime-safety"><a href="#Runtime-safety" class="headerlink" title="Runtime-safety"></a>Runtime-safety</h4><p>å…³äºæ³›å‹è¿™é‡Œæˆ‘ä¸€ç›´æœ‰ä¸ªç–‘é—®ï¼Œæ¯”å¦‚æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ³›å‹æ•°ç»„ï¼Œä½¿ç”¨ Go ä»£ç å£°æ˜å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> List[T any] []T</span><br></pre></td></tr></table></figure>

<p>å‡è®¾æˆ‘ä»¬åœ¨åˆå§‹åŒ–çš„æ—¶å€™ä½¿ç”¨ intï¼Œä½†æ˜¯åç»­æ‰§è¡Œ append æ“ä½œçš„æ—¶å€™åŠ ä¸€ä¸ª string èƒ½ä¸èƒ½è¡Œå¾—é€šï¼Ÿ<strong>æ˜¾ç„¶åœ¨ Go  ä¸­å¹¶ä¸è¡Œ</strong>ã€‚é‚£ä¹ˆåœ¨å…¶ä»–è¯­è¨€ä¸­å‘¢ï¼Ÿ</p>
<h5 id="JAVA-1"><a href="#JAVA-1" class="headerlink" title="JAVA"></a>JAVA</h5><p><a target="_blank" rel="noopener" href="https://github.com/akutz/go-generics-the-hard-way/blob/main/05-internals/02-runtime-type-safety/01-java.md">java-runtime-safety</a> ä»è¿™é‡Œä¸éš¾çœ‹å‡ºï¼Œjava ä¸­æ“¦å‡ºäº†åˆå§‹åŒ–æ³›å‹çš„ä¿¡æ¯ï¼Œå¾ˆéš¾ä¿æŒåœ¨ runtime æ—¶å®‰å…¨ã€‚</p>
<h5 id="NET"><a href="#NET" class="headerlink" title=".NET"></a>.NET</h5><p><a target="_blank" rel="noopener" href="https://github.com/akutz/go-generics-the-hard-way/blob/main/05-internals/02-runtime-type-safety/02-dotnet.md">.NET-runtime-safety</a> è¿™é‡Œä¿æŒäº†æ³›å‹çš„ç›¸å…³ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨è¿è¡Œæ—¶æ˜¯å®‰å…¨çš„ã€‚</p>
<h5 id="Golang-1"><a href="#Golang-1" class="headerlink" title="Golang"></a>Golang</h5><p><a target="_blank" rel="noopener" href="https://github.com/akutz/go-generics-the-hard-way/blob/main/05-internals/02-runtime-type-safety/03-golang.md">Golang-runtime-safety</a> é€šè¿‡å‰é¢çš„å†…å®¹æˆ‘ä»¬çŸ¥é“ï¼ŒGo ä¸­æ²¡æœ‰è¿›è¡Œ type erasureï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥åšåˆ° runtime æ—¶å®‰å…¨ã€‚</p>
<h4 id="Runtime-instantiation"><a href="#Runtime-instantiation" class="headerlink" title="Runtime-instantiation"></a>Runtime-instantiation</h4><blockquote>
<p>The ability to instantiate new types using generics at runtimeï¼Œåœ¨è¿è¡Œæ—¶ä½¿ç”¨æ³›å‹åˆå§‹åŒ–çš„èƒ½åŠ›ã€‚</p>
</blockquote>
<p>æˆ‘è§‰å¾—ï¼Œå¦‚æœè¦æ”¯æŒè¿è¡Œæ—¶åˆå§‹åŒ–çš„èƒ½åŠ›ï¼Œéœ€è¦å…·å¤‡åŠ¨æ€æ¨æ–­ç±»å‹çš„èƒ½åŠ›ï¼Œåœ¨è¿è¡Œæ—¶æ£€æµ‹æ³›å‹æ˜¯å“ªç§ç±»å‹ã€‚</p>
<h5 id="JAVA-2"><a href="#JAVA-2" class="headerlink" title="JAVA"></a>JAVA</h5><p><a target="_blank" rel="noopener" href="https://github.com/akutz/go-generics-the-hard-way/blob/main/05-internals/03-runtime-instantiation/01-java.md">java-runtime-instantiation</a> ä¸æ”¯æŒï¼ŒJavaä¸­çš„æ³›å‹çº¯ç²¹æ˜¯ç¼–è¯‘æ—¶ç‰¹æ€§ã€‚</p>
<h5 id="NET-1"><a href="#NET-1" class="headerlink" title=".NET"></a>.NET</h5><p><a target="_blank" rel="noopener" href="https://github.com/akutz/go-generics-the-hard-way/blob/main/05-internals/03-runtime-instantiation/02-dotnet.md">.NET-runtime-instantiation</a> æ”¯æŒ.. è¿™ä¹ˆä¸€çœ‹.. .NET è¿˜æ˜¯ç‰›é€¼..æˆ‘æœ‰ä¸ªå¤§å­¦åŒå­¦äººå®¶éƒ½æ˜¯ JAVAï¼ŒPythonï¼Œè¿™å…„å¼Ÿå­¦äº†ä¸¤å¹´ .NET å“ˆå“ˆå“ˆå“ˆï¼Œåæ¥ç”±äºæ¯”è¾ƒå†·é—¨ï¼Œä¹Ÿæ”¾å¼ƒäº†å“ˆå“ˆã€‚</p>
<h5 id="Golang-2"><a href="#Golang-2" class="headerlink" title="Golang"></a>Golang</h5><p><a target="_blank" rel="noopener" href="https://github.com/akutz/go-generics-the-hard-way/blob/main/05-internals/03-runtime-instantiation/03-golang.md">golang-runtime-instantiation</a> ä¸æ”¯æŒï¼ŒGo ä¸­çš„æ³›å‹åŒ java ä¸€æ ·éƒ½æ˜¯ç¼–è¯‘æ—¶çš„ç‰¹æ€§ï¼Œåœ¨ç¼–è¯‘æ—¶å°±ç¡®å®šå¥½äº†ç±»å‹ã€‚</p>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><table>
<thead>
<tr>
<th></th>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td align="center">Compile-time type safety</td>
<td align="center">Type erasure</td>
<td align="center">Runtime type safety</td>
<td align="center">Runtime instantiation</td>
</tr>
<tr>
<td>Java</td>
<td align="center">âœ“</td>
<td align="center">âœ“</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td>.NET</td>
<td align="center">âœ“</td>
<td align="center"></td>
<td align="center">âœ“</td>
<td align="center">âœ“</td>
</tr>
<tr>
<td>Go</td>
<td align="center">âœ“</td>
<td align="center"></td>
<td align="center">âœ“</td>
<td align="center"></td>
</tr>
</tbody></table>
<p>è‡³æ­¤ï¼Œæ³›å‹çš„å­¦ä¹ å°±å‘Šä¸€æ®µè½äº†ï¼Œå­¦åˆ°äº†è¯­æ³•ï¼Œå¦‚ä½•ä½¿ç”¨ï¼Œå·²ç»åœ¨æŸäº›ç®€å•çš„åœºæ™¯ä¸‹ä½¿ç”¨æ³›å‹å¸¦æ¥çš„ä¾¿åˆ©æ€§ã€‚ä¹Ÿæˆ–å¤šæˆ–å°‘çš„äº†è§£åˆ°äº†å…¶ä»–è¯­è¨€çš„æ³›å‹ç‰¹æ€§ã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://github.com/akutz/go-generics-the-hard-way/">go-generics-the-hard-way</a></li>
</ol>
</div><div id="donate"><link rel="stylesheet" type="text/css" href="/css/donate.css?v=1.0.0"><script type="text/javascript" src="/js/donate.js?v=1.0.0" successtext="å¤åˆ¶æˆåŠŸ!"></script><a class="pos-f tr3" id="github" href="https://github.com/clamyang" target="_blank" title="Github"></a><div id="DonateText">Donate</div><ul class="list pos-f" id="donateBox"><li id="AliPay" qr="/img/AliPayQR.jpg"></li><li id="WeChat" qr="/img/WeChatQR.jpg"></li></ul><div class="pos-f left-100" id="QRBox"><div id="MainBox"></div></div></div><div class="post-copyright"><script type="text/javascript" src="/js/copyright.js?v=1.0.0" successtext="å¤åˆ¶æˆåŠŸ!"></script><link rel="stylesheet" type="text/css" href="/css/copyright.css?v=1.0.0"><p><span>æœ¬æ–‡æ ‡é¢˜ï¼š</span>go-generic</p><p><span>æ–‡ç« ä½œè€…ï¼š</span>bqyang</p><p><span>å‘å¸ƒæ—¶é—´ï¼š</span>2022-06-06</p><p><span>æœ€åæ›´æ–°ï¼š</span>2022-06-07</p><p><span>åŸå§‹é“¾æ¥ï¼š</span><a href="/2022/language/golang/go-generic/">https://bqyang.top/2022/language/golang/go-generic/</a><span class="copy-path"><i class="fa fa-clipboard" data-clipboard-text="https://bqyang.top/2022/language/golang/go-generic/"></i></span></p><p><span>ç‰ˆæƒå£°æ˜ï¼š</span>The author owns the copyright, please indicate the source reproduced.</p></div><br><div class="tags"></div><div class="post-nav"><a class="pre" href="/2022/design-pattern/UML/first-uml/">UML ç±»å›¾</a><a class="next" href="/2022/language/golang/go-ast/">åˆè¯† go-ast</a></div><script src="https://utteranc.es/client.js" repo="clamyang/blog_comments" issue-term="title" theme="github-light" crossorigin="anonymous" async> </script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://bqyang.top"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€è¿‘æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2022/design-pattern/Behavioral/templete-method/">æ¨¡æ¿æ–¹æ³•</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/language/golang/go-context/">go-context</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/design-pattern/factory-method/">å·¥å‚æ–¹æ³•æ¨¡å¼</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/design-pattern/proxyAndDecorator/">ä»£ç†æ¨¡å¼</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/language/golang/go-errors/">go-error-handling</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/design-pattern/principle/">é¢å‘å¯¹è±¡äº”å¤§åŸåˆ™</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/design-pattern/strategy/">ç­–ç•¥æ¨¡å¼</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/design-pattern/easy-factory/">ç®€å•å·¥å‚æ¨¡å¼</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/design-pattern/UML/first-uml/">UML ç±»å›¾</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/language/golang/go-generic/">go-generic</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> å‹æƒ…é“¾æ¥</i></div><ul></ul><a href="http://www.xargin.com/" title="Xargin" target="_blank">Xargin</a><ul></ul><a href="https://mytechshares.com/" title="è‘£æ³½æ¶¦çš„æŠ€æœ¯ç¬”è®°" target="_blank">è‘£æ³½æ¶¦çš„æŠ€æœ¯ç¬”è®°</a><ul></ul><a href="https://hujingnb.com/" title="çƒŸè‰çš„é¦™å‘³" target="_blank">çƒŸè‰çš„é¦™å‘³</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2022 <a href="/." rel="nofollow">æ¨å®å¼ºçš„æŠ€æœ¯ç¬”è®°.</a>Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://beian.miit.gov.cn/"> äº¬ICPå¤‡2021035561å·.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="å¤åˆ¶æˆåŠŸ!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>